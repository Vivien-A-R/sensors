,,,,,,,,,,,,,,,,,
,,Waggle transmission packet format,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,,,Coresense packet -- protocol ver1 (one way communication),,,,,,,,,,,,,,
,,,preamble,sequence 4 bits,protocol 4 bits,data length,data (subpackets),,CRC,postscript,,,,,,,
,,,0xAA,0x01 - 0x0F << 4,0x00 (protocol ver1),0x00 - 0xFF,"varies, <= 256 bytes",,crc,0x55,,,,,,,
,,,,,,,,,,,,,,,,,
,,,Coresense packet -- protocol ver2 (two ways communication),,,,,,,,,,,,Function Type,,
,,,preamble,data type 4 bits,protocol 4 bits,data length,End of Seq,squence#,data (subpackets),,CRC,postscript,,,initSensor,0x01,Core
,,,0xAA,0x00 - 0x0F << 4,0x02 (protocol ver2),0x00 - 0xFF,0 or 1,0x00 - 0x7F,"varies, <= 255 bytes",,crc,0x55,,,configureSensor,0x02,
,,,,,,,,,,,,,,,enableSensor,0x03,
,,,,,,,,,,,,,,,disableSensor,0x04,
,,,,,,,,,,,,,,,readSensor,0x05,
,,,,,,,,,,,,,,,writeSensor,0x06,
,,,,,,,,,,,,,,,initBus,0x11,Bus
,,,,,,,,,,,data type,adpot last 4 bits,,,configureBus,0x12,
,,,Coresense subpacket -- protocol ver1 (one way communication),,,,,,,plugin --> FW,request,0x00,,,enableBus,0x13,
,,,sensor id,validity 1 bits,data length 7 bits,data,,,,FW --> plugin,sensor reading,0x01,,,disableBus,0x14,
,,,varies,0 or 1 of 1st bit,0x00 - 0x7F,"varies, <= 128 bytes",,,,FW --> plugin,bus reading,0x02,,,readBus,0x15,
,,,,,,,,,,,,,,,writeBus,0x16,
,,,"Coresense subpacket -- protocol ver2, from plugin TO FW",,,,,,,,acknowledge,?????????????,,,,,
,,,call function,acknowledge 1 bit,param length 7 bits,parameters (1st byte is sensor id),,,,,need ack,0x00,,,,,
,,,0x00 - 0xFF,0x00 or 0x01,0x00 - 0x7F,"varies, <= 16 bytes",,,,,read sensor,0x01,,,,,
,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,,,"Coresense subpacket -- protocol ver2 , FROM FW to plugin",,,,,,,,,,,,,,
,,,sensor id,validity 1 bits,data length 7 bits,data,,,,,,,,,,,
,,,varies,0 or 1 of 1st bit,0x00 - 0x7F,"varies, <= 128 bytes",,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,,,For alpha and Chem configuration,,,,,,,,,,,,,,
,,,,0x31 alpha config,0x16 chem config,,,,,,,,,,,,
,,,Start sending..,Start statement,Start statement,,,,,,,,,,,,
,,,data,256 bytes,1514 bytes,,,,,,,,,,,,
,,,End sending..,End statement,End statement,,,,,,,,,,,,